import groovy.json.JsonSlurper
pipeline {
    agent any
    stages {
        stage('send test mails') {
            steps {
                script{
                    def jss = new JsonSlurper()
                    def orecp = jss.parseText("${recipients}");
                    Map mTemp = (Map) orecp;
                    sendMail(mTemp);
                }
            }
        }
    }
}

@NonCPS
def sendMail(mTemp) {
    mTemp.each { name, address ->
        println "Sent to ${name} at ${address}";
        emailext body: "Dear ${name} testy testy testington",
        subject: "test email from Jenkins",
        to: "${address}";
    }
}